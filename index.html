<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–õ–æ–≤–µ—Ü –æ—Ç–≤–µ—Ç–æ–≤ - –¢—Ä–µ–Ω–∞–∂—ë—Ä —É–º–Ω–æ–∂–µ–Ω–∏—è</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Comic Sans MS', cursive, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            overflow: hidden;
        }

        .container {
            max-width: 800px;
            width: 100%;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            text-align: center;
            position: relative;
            z-index: 10;
        }

        h1 {
            color: #ff6b6b;
            margin-bottom: 20px;
            font-size: 2.5rem;
            text-shadow: 2px 2px 0 #ffd166;
        }

        .screen {
            display: none;
            padding: 20px;
        }

        #start-screen {
            display: block;
        }

        .btn {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s;
            box-shadow: 0 5px 0 #ff8e8e;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 0 #ff8e8e;
        }

        .btn:active {
            transform: translateY(2px);
            box-shadow: 0 3px 0 #ff8e8e;
        }

        .game-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            background: #ffd166;
            padding: 10px 20px;
            border-radius: 50px;
            font-size: 1.2rem;
            color: #333;
        }

        .question {
            font-size: 3rem;
            margin: 20px 0;
            color: #118ab2;
            text-shadow: 2px 2px 0 #06d6a0;
        }

        .timer-bar {
            height: 20px;
            background: #ef476f;
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
        }

        .timer-progress {
            height: 100%;
            background: #06d6a0;
            width: 100%;
            transition: width 1s linear;
        }

        #game-area {
            position: relative;
            height: 400px;
            border: 3px dashed #118ab2;
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
            background: rgba(173, 216, 230, 0.2);
        }

        .answer {
            position: absolute;
            padding: 15px 25px;
            font-size: 1.5rem;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.2s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            animation: float 3s infinite ease-in-out;
            background: #ef476f;
            color: white;
        }

        .feedback {
            position: absolute;
            font-size: 4rem;
            z-index: 100;
            pointer-events: none;
        }

        .happy {
            animation: happy 1.5s ease-out forwards;
        }

        .explosion {
            animation: explosion 1s ease-out forwards;
        }

        .results {
            font-size: 1.3rem;
            line-height: 1.8;
            margin: 20px 0;
            background: #ffd166;
            padding: 20px;
            border-radius: 15px;
        }

        .highlight {
            font-weight: bold;
            color: #118ab2;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(5deg); }
        }

        @keyframes happy {
            0% { transform: scale(0.5) rotate(0deg); opacity: 0; }
            50% { transform: scale(1.2) rotate(10deg); opacity: 1; }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }

        @keyframes explosion {
            0% { transform: scale(0.5); opacity: 0; }
            50% { transform: scale(1.5); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }

        .floating-object {
            position: absolute;
            font-size: 2rem;
            opacity: 0.7;
            z-index: 1;
            animation: drift 20s infinite linear;
        }

        @keyframes drift {
            0% { transform: translate(0, 0) rotate(0deg); }
            100% { transform: translate(100px, 100px) rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- –ü–ª–∞–≤–∞—é—â–∏–µ –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã -->
    <div class="floating-object" style="top:10%; left:5%;">‚úñÔ∏è</div>
    <div class="floating-object" style="top:20%; right:10%;">‚ûó</div>
    <div class="floating-object" style="bottom:15%; left:15%;">‚ûï</div>
    <div class="floating-object" style="bottom:25%; right:5%;">‚ûñ</div>
    <div class="floating-object" style="top:40%; left:10%;">üî¢</div>
    <div class="floating-object" style="top:60%; right:15%;">üéØ</div>

    <div class="container">
        <!-- –°—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω -->
        <div id="start-screen" class="screen">
            <h1>üéØ –õ–æ–≤–µ—Ü –æ—Ç–≤–µ—Ç–æ–≤ üéØ</h1>
            <p style="font-size: 1.2rem; margin: 20px 0; color: #555;">
                –õ–æ–≤–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã, –ø–æ–∫–∞ –æ–Ω–∏ –ø–ª–∞–≤–∞—é—Ç –ø–æ —ç–∫—Ä–∞–Ω—É!<br>
                –£ —Ç–µ–±—è –≤—Å–µ–≥–æ 5 —Å–µ–∫—É–Ω–¥ –Ω–∞ –∫–∞–∂–¥—ã–π –ø—Ä–∏–º–µ—Ä!
            </p>
            <button id="start-btn" class="btn">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
        </div>

        <!-- –ò–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω -->
        <div id="game-screen" class="screen">
            <h1>–õ–æ–≤–µ—Ü –æ—Ç–≤–µ—Ç–æ–≤</h1>
            <div class="game-info">
                <div>–í–æ–ø—Ä–æ—Å: <span id="question-count">1</span>/10</div>
                <div>–û—à–∏–±–∫–∏: <span id="mistakes">0</span></div>
            </div>
            <div class="question" id="question">3 √ó 4 = ?</div>
            <div class="timer-bar">
                <div class="timer-progress" id="timer"></div>
            </div>
            <div id="game-area"></div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ -->
        <div id="result-screen" class="screen">
            <h1>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–≥—Ä—ã</h1>
            <div class="results">
                <p>–û–±—â–µ–µ –≤—Ä–µ–º—è: <span id="total-time" class="highlight">0</span> —Å–µ–∫—É–Ω–¥</p>
                <p>–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –Ω–∞ –≤–æ–ø—Ä–æ—Å: <span id="avg-time" class="highlight">0</span> —Å–µ–∫—É–Ω–¥</p>
                <p>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫: <span id="total-mistakes" class="highlight">0</span></p>
                <p>–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: <span id="correct-answers" class="highlight">0</span>/10</p>
            </div>
            <button id="restart-btn" class="btn">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
        </div>
    </div>

    <script>
        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const startScreen = document.getElementById('start-screen');
        const gameScreen = document.getElementById('game-screen');
        const resultScreen = document.getElementById('result-screen');
        const startBtn = document.getElementById('start-btn');
        const restartBtn = document.getElementById('restart-btn');
        const questionElement = document.getElementById('question');
        const questionCountElement = document.getElementById('question-count');
        const mistakesElement = document.getElementById('mistakes');
        const gameArea = document.getElementById('game-area');
        const timerElement = document.getElementById('timer');
        const totalTimeElement = document.getElementById('total-time');
        const avgTimeElement = document.getElementById('avg-time');
        const totalMistakesElement = document.getElementById('total-mistakes');
        const correctAnswersElement = document.getElementById('correct-answers');

        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–≥—Ä—ã
        let currentQuestion = 1;
        let totalQuestions = 10;
        let mistakes = 0;
        let correctAnswers = 0;
        let gameTimer;
        let timeLeft = 5;
        let totalGameTime = 0;
        let questionStartTime;
        let answers = [];
        let correctAnswerValue;

        // –ù–∞—á–∞–ª–æ –∏–≥—Ä—ã
        startBtn.addEventListener('click', startGame);
        restartBtn.addEventListener('click', startGame);

        function startGame() {
            // –°–±—Ä–æ—Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
            currentQuestion = 1;
            mistakes = 0;
            correctAnswers = 0;
            totalGameTime = 0;
            
            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–æ–≤
            startScreen.style.display = 'none';
            resultScreen.style.display = 'none';
            gameScreen.style.display = 'block';
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
            updateGameInfo();
            
            // –ó–∞–ø—É—Å–∫ –ø–µ—Ä–≤–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
            startQuestion();
        }

        function startQuestion() {
            // –û—á–∏—Å—Ç–∫–∞ –∏–≥—Ä–æ–≤–æ–π –æ–±–ª–∞—Å—Ç–∏
            gameArea.innerHTML = '';
            answers = [];
            
            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–∞
            const num1 = Math.floor(Math.random() * 10) + 1;
            const num2 = Math.floor(Math.random() * 10) + 1;
            correctAnswerValue = num1 * num2;
            
            // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞
            questionElement.textContent = `${num1} √ó ${num2} = ?`;
            
            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ (1 –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∏ 3 –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö)
            answers.push(correctAnswerValue);
            
            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
            while (answers.length < 4) {
                let wrongAnswer;
                do {
                    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Ä–∞–∑—É–º–Ω–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞
                    const offset = Math.floor(Math.random() * 10) - 5;
                    wrongAnswer = correctAnswerValue + offset;
                } while (wrongAnswer <= 0 || answers.includes(wrongAnswer));
                
                answers.push(wrongAnswer);
            }
            
            // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤
            shuffleArray(answers);
            
            // –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–≤–∞—é—â–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤
            createFloatingAnswers(answers);
            
            // –ó–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–∞
            timeLeft = 5;
            timerElement.style.width = '100%';
            questionStartTime = Date.now();
            
            clearInterval(gameTimer);
            gameTimer = setInterval(() => {
                timeLeft -= 0.1;
                timerElement.style.width = `${(timeLeft / 5) * 100}%`;
                
                if (timeLeft <= 0) {
                    clearInterval(gameTimer);
                    handleTimeOut();
                }
            }, 100);
        }

        function createFloatingAnswers(answers) {
            const gameAreaRect = gameArea.getBoundingClientRect();
            
            answers.forEach((answer, index) => {
                const answerElement = document.createElement('div');
                answerElement.className = 'answer';
                answerElement.textContent = answer;
                
                // –°–ª—É—á–∞–π–Ω–∞—è –Ω–∞—á–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è
                const startX = Math.random() * (gameAreaRect.width - 120);
                const startY = Math.random() * (gameAreaRect.height - 60);
                
                answerElement.style.left = `${startX}px`;
                answerElement.style.top = `${startY}px`;
                
                // –°–ª—É—á–∞–π–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏—è
                const duration = 3 + Math.random() * 4;
                answerElement.style.animation = `float ${duration}s infinite ease-in-out`;
                
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞
                answerElement.addEventListener('click', () => {
                    handleAnswerClick(answer === correctAnswerValue, answerElement);
                });
                
                gameArea.appendChild(answerElement);
            });
        }

        function handleAnswerClick(isCorrect, element) {
            clearInterval(gameTimer);
            
            // –†–∞—Å—á–µ—Ç –≤—Ä–µ–º–µ–Ω–∏, –∑–∞—Ç—Ä–∞—á–µ–Ω–Ω–æ–≥–æ –Ω–∞ –≤–æ–ø—Ä–æ—Å
            const questionTime = (Date.now() - questionStartTime) / 1000;
            totalGameTime += questionTime;
            
            // –ü–æ–ª—É—á–∞–µ–º –ø–æ–∑–∏—Ü–∏—é —ç–ª–µ–º–µ–Ω—Ç–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∞–∫—Ü–∏–∏
            const rect = element.getBoundingClientRect();
            const gameAreaRect = gameArea.getBoundingClientRect();
            
            // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
            const feedback = document.createElement('div');
            feedback.className = `feedback ${isCorrect ? 'happy' : 'explosion'}`;
            feedback.textContent = isCorrect ? 'üòä' : 'üí•';
            
            // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ–º —ç–ª–µ–º–µ–Ω—Ç –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
            feedback.style.left = `${rect.left - gameAreaRect.left + rect.width/2}px`;
            feedback.style.top = `${rect.top - gameAreaRect.top + rect.height/2}px`;
            feedback.style.transform = 'translate(-50%, -50%)';
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∏–≥—Ä–æ–≤—É—é –æ–±–ª–∞—Å—Ç—å
            gameArea.appendChild(feedback);
            
            // –£–¥–∞–ª—è–µ–º –≤—Å–µ –æ—Ç–≤–µ—Ç—ã
            const allAnswers = document.querySelectorAll('.answer');
            allAnswers.forEach(answer => answer.remove());
            
            if (isCorrect) {
                correctAnswers++;
            } else {
                mistakes++;
            }
            
            // –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –≤–æ–ø—Ä–æ—Å—É –∏–ª–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã
            currentQuestion++;
            updateGameInfo();
            
            if (currentQuestion <= totalQuestions) {
                setTimeout(startQuestion, 1500);
            } else {
                setTimeout(endGame, 1500);
            }
        }

        function handleTimeOut() {
            // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ –¥–ª—è —Ç–∞–π–º–∞—É—Ç–∞
            const feedback = document.createElement('div');
            feedback.className = 'feedback explosion';
            feedback.textContent = '‚è∞';
            feedback.style.left = '50%';
            feedback.style.top = '50%';
            feedback.style.transform = 'translate(-50%, -50%)';
            gameArea.appendChild(feedback);
            
            // –£–¥–∞–ª—è–µ–º –≤—Å–µ –æ—Ç–≤–µ—Ç—ã
            const allAnswers = document.querySelectorAll('.answer');
            allAnswers.forEach(answer => answer.remove());
            
            mistakes++;
            currentQuestion++;
            updateGameInfo();
            
            if (currentQuestion <= totalQuestions) {
                setTimeout(startQuestion, 1500);
            } else {
                setTimeout(endGame, 1500);
            }
        }

        function updateGameInfo() {
            questionCountElement.textContent = currentQuestion;
            mistakesElement.textContent = mistakes;
        }

        function endGame() {
            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–æ–≤
            gameScreen.style.display = 'none';
            resultScreen.style.display = 'block';
            
            // –†–∞—Å—á–µ—Ç –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
            totalTimeElement.textContent = totalGameTime.toFixed(1);
            avgTimeElement.textContent = (totalGameTime / totalQuestions).toFixed(1);
            totalMistakesElement.textContent = mistakes;
            correctAnswersElement.textContent = correctAnswers;
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏—è –º–∞—Å—Å–∏–≤–∞
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
    </script>
</body>
</html>
