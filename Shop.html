<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–∞–≥–∞–∑–∏–Ω –º–µ—Ä - –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–≥—Ä–∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #f9f3e9 0%, #f5e9e3 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px;
        }
        
        /* –°—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω */
        #startScreen, .game-container {
            width: 100%;
            max-width: 650px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .game-container {
            display: none;
        }
        
        .header {
            background: #6b8e6b;
            color: white;
            padding: 12px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 1.5rem;
            margin: 0;
        }
        
        .content {
            padding: 15px;
        }
        
        .info-section, .rules-section {
            margin-bottom: 15px;
            padding: 12px;
            border-radius: 8px;
            font-size: 0.85rem;
            line-height: 1.3;
        }
        
        .info-section {
            background: #e8f5e9;
            border-left: 4px solid #6b8e6b;
        }
        
        .rules-section {
            background: #f5f0eb;
            border-left: 4px solid #a37b73;
        }
        
        h2 {
            color: #5a4a42;
            font-size: 1.1rem;
            margin-bottom: 8px;
        }
        
        .info-section p, .rules-section li {
            margin-bottom: 5px;
            color: #5a4a42;
        }
        
        .rules-section ul {
            padding-left: 18px;
        }
        
        .start-button {
            display: block;
            width: 180px;
            margin: 15px auto 5px;
            padding: 10px;
            background: #a37b73;
            color: white;
            border: none;
            border-radius: 20px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .start-button:hover {
            background: #8b635c;
            transform: translateY(-2px);
        }
        
        /* –ò–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω */
        .category-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            justify-content: center;
            margin: 12px 0;
        }
        
        .category-btn {
            background: #d4b4a6;
            border: none;
            padding: 8px 10px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            font-size: 0.85rem;
            flex: 1;
            min-width: 110px;
            max-width: 150px;
        }
        
        .category-btn.active {
            background: #6b8e6b;
            color: white;
        }
        
        .target {
            background: #e8d7c9;
            padding: 12px;
            border-radius: 8px;
            margin: 12px 0;
            font-size: 1.1rem;
            font-weight: bold;
            color: #8b4513;
            border: 2px solid #a37b73;
            text-align: center;
        }
        
        .items {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
            gap: 8px;
            margin: 12px 0;
        }
        
        .item {
            background: #f8f4f0;
            border: 2px solid #e8d7c9;
            padding: 10px 4px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            font-size: 0.85rem;
            min-height: 65px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        
        .item.selected {
            background: #d1e6d1;
            border-color: #6b8e6b;
        }
        
        .controls {
            margin: 12px 0;
            display: flex;
            justify-content: center;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .game-btn {
            background: #a37b73;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 18px;
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: bold;
            min-width: 110px;
        }
        
        .game-btn.clear {
            background: #d4a5a5;
        }
        
        .game-btn.restart {
            background: #6b8e6b;
        }
        
        .status {
            display: flex;
            justify-content: space-between;
            background: #f5f0eb;
            padding: 10px;
            border-radius: 6px;
            margin-top: 12px;
            flex-wrap: wrap;
            gap: 6px;
        }
        
        .status div {
            padding: 6px 10px;
            background: white;
            border-radius: 4px;
            flex: 1;
            min-width: 110px;
            text-align: center;
            font-size: 0.85rem;
        }
        
        .message {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 15px;
        }
        
        .message.show {
            display: flex;
        }
        
        .message-content {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            max-width: 320px;
            width: 100%;
            border: 3px solid;
        }
        
        .message.success {
            border-color: #6b8e6b;
        }
        
        .message.error {
            border-color: #d4a5a5;
        }
        
        @media (max-width: 600px) {
            .items {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .status {
                flex-direction: column;
            }
            
            .status div {
                min-width: 100%;
            }
            
            .header h1 {
                font-size: 1.3rem;
            }
            
            .content {
                padding: 12px;
            }
            
            .info-section, .rules-section {
                font-size: 0.8rem;
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- –°—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω -->
    <div id="startScreen">
        <div class="header">
            <h1>üìè –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–≥—Ä–∞ "–ú–∞–≥–∞–∑–∏–Ω –º–µ—Ä" üìè</h1>
        </div>
        
        <div class="content">
            <div class="info-section">
                <h2>üë®‚Äçüéì –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–≤—Ç–æ—Ä–µ:</h2>
                <p>üéì –í—ã–ø–æ–ª–Ω–∏–ª: —É—á–µ–Ω–∏–∫ 4–∞ –∫–ª–∞—Å—Å–∞</p>
                <p>üè´ –ú–ë–û–£ –°–û–® ‚Ññ41, –≥. –ö—É—Ä–≥–∞–Ω</p>
                <p>‚úçÔ∏è –ú–∏—Ö–∞–π–ª–æ–≤ –í–∏—Ç–∞–ª–∏–π</p>
            </div>
            
            <div class="rules-section">
                <h2>üéØ –ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã:</h2>
                <ul>
                    <li>–í—ã–±–µ—Ä–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∏–∑–º–µ—Ä–µ–Ω–∏—è</li>
                    <li>–ù–∞–∂–∏–º–∞–π –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞</li>
                    <li>–°–æ–±–µ—Ä–∏ –Ω—É–∂–Ω—É—é —Å—É–º–º—É –≤–µ–ª–∏—á–∏–Ω</li>
                    <li>–ù–∞–∂–º–∏ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å"</li>
                    <li>+10 –±–∞–ª–ª–æ–≤ –∑–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç</li>
                    <li>-2 –±–∞–ª–ª–∞ –∑–∞ –æ—à–∏–±–∫—É</li>
                    <li>–ü—Ä–æ–π–¥–∏ –≤—Å–µ 4 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏!</li>
                </ul>
            </div>
            
            <button class="start-button" onclick="startGame()">üéÆ –ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
        </div>
    </div>
    
    <!-- –ò–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω -->
    <div class="game-container" id="gameScreen">
        <div class="header">
            <h1>üõí –ú–∞–≥–∞–∑–∏–Ω –º–µ—Ä</h1>
        </div>
        
        <div class="content">
            <div class="category-selector">
                <button class="category-btn active" onclick="switchCategory('length')">üìè –î–ª–∏–Ω–∞</button>
                <button class="category-btn" onclick="switchCategory('mass')">‚öñÔ∏è –ú–∞—Å—Å–∞</button>
                <button class="category-btn" onclick="switchCategory('area')">üü¶ –ü–ª–æ—â–∞–¥—å</button>
                <button class="category-btn" onclick="switchCategory('time')">‚è∞ –í—Ä–µ–º—è</button>
            </div>
            
            <div class="target" id="targetValue">
                –ó–∞–≥—Ä—É–∑–∫–∞...
            </div>
            
            <div class="items" id="itemsContainer">
                <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
            </div>
            
            <div class="controls">
                <button class="game-btn" onclick="checkAnswer()">‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
                <button class="game-btn clear" onclick="clearSelection()">üîÑ –°–±—Ä–æ—Å–∏—Ç—å</button>
                <button class="game-btn restart" onclick="restartGame()">üîÑ –ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
            </div>
            
            <div class="status">
                <div>üìä –í—ã–±—Ä–∞–Ω–æ: <span id="currentSum">0</span></div>
                <div>‚è±Ô∏è –í—Ä–µ–º—è: <span id="timer">00:00</span></div>
                <div>‚≠ê –û—á–∫–∏: <span id="score">0</span></div>
            </div>
        </div>
    </div>
    
    <!-- –°–æ–æ–±—â–µ–Ω–∏–µ -->
    <div class="message" id="messageOverlay">
        <div class="message-content" id="messageContent">
            <h2 id="messageTitle" style="color: #6b8e6b; margin-bottom: 10px;">–ú–æ–ª–æ–¥–µ—Ü!</h2>
            <p id="messageText" style="margin-bottom: 10px;">–¢—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–æ–±—Ä–∞–ª –≤–µ–ª–∏—á–∏–Ω—É!</p>
            <p id="messageScore" style="font-weight: bold; color: #8b4513; margin: 10px 0; font-size: 1rem;">+10 –±–∞–ª–ª–æ–≤</p>
            <button onclick="closeMessage()" style="background: #a37b73; color: white; border: none; padding: 8px 20px; border-radius: 20px; cursor: pointer;">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
        </div>
    </div>

    <script>
        // –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –∏–≥—Ä—ã - –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
        let currentCategory = 'length';
        let selectedItems = [];
        let score = 0;
        let seconds = 0;
        let timer;
        
        // 20 –∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        const tasks = {
            length: [
                { target: '1 –º 25 —Å–º', targetValue: 125, items: getLengthItems() },
                { target: '2 –º 50 —Å–º', targetValue: 250, items: getLengthItems() },
                { target: '1 –º 75 —Å–º', targetValue: 175, items: getLengthItems() },
                { target: '3 –º 25 —Å–º', targetValue: 325, items: getLengthItems() },
                { target: '2 –º', targetValue: 200, items: getLengthItems() },
                { target: '1 –º 50 —Å–º', targetValue: 150, items: getLengthItems() },
                { target: '2 –º 75 —Å–º', targetValue: 275, items: getLengthItems() },
                { target: '3 –º 50 —Å–º', targetValue: 350, items: getLengthItems() },
                { target: '4 –º 25 —Å–º', targetValue: 425, items: getLengthItems() },
                { target: '1 –º', targetValue: 100, items: getLengthItems() },
                { target: '2 –º 25 —Å–º', targetValue: 225, items: getLengthItems() },
                { target: '3 –º 75 —Å–º', targetValue: 375, items: getLengthItems() },
                { target: '4 –º 50 —Å–º', targetValue: 450, items: getLengthItems() },
                { target: '5 –º 25 —Å–º', targetValue: 525, items: getLengthItems() },
                { target: '2 –º 100 —Å–º', targetValue: 300, items: getLengthItems() },
                { target: '3 –º', targetValue: 300, items: getLengthItems() },
                { target: '4 –º', targetValue: 400, items: getLengthItems() },
                { target: '5 –º', targetValue: 500, items: getLengthItems() },
                { target: '1 –º 80 —Å–º', targetValue: 180, items: getLengthItems() },
                { target: '2 –º 80 —Å–º', targetValue: 280, items: getLengthItems() }
            ],
            mass: [
                { target: '1 –∫–≥ 250 –≥', targetValue: 1250, items: getMassItems() },
                { target: '2 –∫–≥ 500 –≥', targetValue: 2500, items: getMassItems() },
                { target: '1 –∫–≥ 750 –≥', targetValue: 1750, items: getMassItems() },
                { target: '3 –∫–≥ 250 –≥', targetValue: 3250, items: getMassItems() },
                { target: '2 –∫–≥', targetValue: 2000, items: getMassItems() },
                { target: '1 –∫–≥ 500 –≥', targetValue: 1500, items: getMassItems() },
                { target: '2 –∫–≥ 750 –≥', targetValue: 2750, items: getMassItems() },
                { target: '3 –∫–≥ 500 –≥', targetValue: 3500, items: getMassItems() },
                { target: '4 –∫–≥ 250 –≥', targetValue: 4250, items: getMassItems() },
                { target: '1 –∫–≥', targetValue: 1000, items: getMassItems() },
                { target: '2 –∫–≥ 250 –≥', targetValue: 2250, items: getMassItems() },
                { target: '3 –∫–≥ 750 –≥', targetValue: 3750, items: getMassItems() },
                { target: '4 –∫–≥ 500 –≥', targetValue: 4500, items: getMassItems() },
                { target: '5 –∫–≥ 250 –≥', targetValue: 5250, items: getMassItems() },
                { target: '2 –∫–≥ 250 –≥', targetValue: 2250, items: getMassItems() },
                { target: '3 –∫–≥', targetValue: 3000, items: getMassItems() },
                { target: '4 –∫–≥', targetValue: 4000, items: getMassItems() },
                { target: '5 –∫–≥', targetValue: 5000, items: getMassItems() },
                { target: '1 –∫–≥ 800 –≥', targetValue: 1800, items: getMassItems() },
                { target: '2 –∫–≥ 800 –≥', targetValue: 2800, items: getMassItems() }
            ],
            area: [
                { target: '1 –º¬≤ 25 —Å–º¬≤', targetValue: 10025, items: getAreaItems() },
                { target: '2 –º¬≤ 50 —Å–º¬≤', targetValue: 20050, items: getAreaItems() },
                { target: '3 –º¬≤', targetValue: 30000, items: getAreaItems() },
                { target: '1 –º¬≤ 75 —Å–º¬≤', targetValue: 10075, items: getAreaItems() },
                { target: '2 –º¬≤', targetValue: 20000, items: getAreaItems() },
                { target: '4 –º¬≤', targetValue: 40000, items: getAreaItems() },
                { target: '2 –º¬≤ 75 —Å–º¬≤', targetValue: 20075, items: getAreaItems() },
                { target: '3 –º¬≤ 50 —Å–º¬≤', targetValue: 30050, items: getAreaItems() },
                { target: '4 –º¬≤ 25 —Å–º¬≤', targetValue: 40025, items: getAreaItems() },
                { target: '1 –º¬≤', targetValue: 10000, items: getAreaItems() },
                { target: '2 –º¬≤ 25 —Å–º¬≤', targetValue: 20025, items: getAreaItems() },
                { target: '3 –º¬≤ 75 —Å–º¬≤', targetValue: 30075, items: getAreaItems() },
                { target: '4 –º¬≤ 50 —Å–º¬≤', targetValue: 40050, items: getAreaItems() },
                { target: '5 –º¬≤ 25 —Å–º¬≤', targetValue: 50025, items: getAreaItems() },
                { target: '2 –º¬≤ 100 —Å–º¬≤', targetValue: 20100, items: getAreaItems() },
                { target: '5 –º¬≤', targetValue: 50000, items: getAreaItems() },
                { target: '6 –º¬≤', targetValue: 60000, items: getAreaItems() },
                { target: '7 –º¬≤', targetValue: 70000, items: getAreaItems() },
                { target: '1 –º¬≤ 80 —Å–º¬≤', targetValue: 10080, items: getAreaItems() },
                { target: '2 –º¬≤ 80 —Å–º¬≤', targetValue: 20080, items: getAreaItems() }
            ],
            time: [
                { target: '1 —á–∞—Å 15 –º–∏–Ω', targetValue: 4500, items: getTimeItems() },
                { target: '2 —á–∞—Å–∞ 30 –º–∏–Ω', targetValue: 9000, items: getTimeItems() },
                { target: '1 —á–∞—Å 45 –º–∏–Ω', targetValue: 6300, items: getTimeItems() },
                { target: '3 —á–∞—Å–∞ 15 –º–∏–Ω', targetValue: 11700, items: getTimeItems() },
                { target: '2 —á–∞—Å–∞', targetValue: 7200, items: getTimeItems() },
                { target: '1 —á–∞—Å 30 –º–∏–Ω', targetValue: 5400, items: getTimeItems() },
                { target: '2 —á–∞—Å–∞ 45 –º–∏–Ω', targetValue: 9900, items: getTimeItems() },
                { target: '3 —á–∞—Å–∞ 30 –º–∏–Ω', targetValue: 12600, items: getTimeItems() },
                { target: '4 —á–∞—Å–∞ 15 –º–∏–Ω', targetValue: 15300, items: getTimeItems() },
                { target: '1 —á–∞—Å', targetValue: 3600, items: getTimeItems() },
                { target: '2 —á–∞—Å–∞ 15 –º–∏–Ω', targetValue: 8100, items: getTimeItems() },
                { target: '3 —á–∞—Å–∞ 45 –º–∏–Ω', targetValue: 13500, items: getTimeItems() },
                { target: '4 —á–∞—Å–∞ 30 –º–∏–Ω', targetValue: 16200, items: getTimeItems() },
                { target: '5 —á–∞—Å–∞ 15 –º–∏–Ω', targetValue: 18900, items: getTimeItems() },
                { target: '2 —á–∞—Å–∞ 1 –º–∏–Ω', targetValue: 7260, items: getTimeItems() },
                { target: '3 —á–∞—Å–∞', targetValue: 10800, items: getTimeItems() },
                { target: '4 —á–∞—Å–∞', targetValue: 14400, items: getTimeItems() },
                { target: '5 —á–∞—Å–æ–≤', targetValue: 18000, items: getTimeItems() },
                { target: '1 —á–∞—Å 48 –º–∏–Ω', targetValue: 6480, items: getTimeItems() },
                { target: '2 —á–∞—Å–∞ 48 –º–∏–Ω', targetValue: 10080, items: getTimeItems() }
            ]
        };
        
        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        function getLengthItems() {
            return [
                { text: '150 —Å–º', value: 150 },
                { text: '100 —Å–º', value: 100 },
                { text: '50 —Å–º', value: 50 },
                { text: '75 —Å–º', value: 75 },
                { text: '125 —Å–º', value: 125 },
                { text: '1 –º', value: 100 },
                { text: '2 –º', value: 200 },
                { text: '175 —Å–º', value: 175 }
            ];
        }
        
        function getMassItems() {
            return [
                { text: '1500 –≥', value: 1500 },
                { text: '1000 –≥', value: 1000 },
                { text: '500 –≥', value: 500 },
                { text: '250 –≥', value: 250 },
                { text: '800 –≥', value: 800 },
                { text: '1 –∫–≥', value: 1000 },
                { text: '2 –∫–≥', value: 2000 },
                { text: '1250 –≥', value: 1250 }
            ];
        }
        
        function getAreaItems() {
            return [
                { text: '20000 —Å–º¬≤', value: 20000 },
                { text: '10000 —Å–º¬≤', value: 10000 },
                { text: '15000 —Å–º¬≤', value: 15000 },
                { text: '5000 —Å–º¬≤', value: 5000 },
                { text: '2 –º¬≤', value: 20000 },
                { text: '1 –º¬≤', value: 10000 },
                { text: '25000 —Å–º¬≤', value: 25000 },
                { text: '7500 —Å–º¬≤', value: 7500 }
            ];
        }
        
        function getTimeItems() {
            return [
                { text: '1 —á–∞—Å', value: 3600 },
                { text: '30 –º–∏–Ω', value: 1800 },
                { text: '45 –º–∏–Ω', value: 2700 },
                { text: '15 –º–∏–Ω', value: 900 },
                { text: '90 –º–∏–Ω', value: 5400 },
                { text: '120 –º–∏–Ω', value: 7200 },
                { text: '60 –º–∏–Ω', value: 3600 },
                { text: '1800 —Å', value: 1800 }
            ];
        }
        
        // –ü–µ—Ä–µ–º–µ—à–∞—Ç—å –º–∞—Å—Å–∏–≤
        function shuffleArray(array) {
            return array.sort(() => Math.random() - 0.5);
        }
        
        // –°–æ–∑–¥–∞—Ç—å —Å–ª—É—á–∞–π–Ω—ã–µ –∑–∞–¥–∞—á–∏ –∏–∑ 20 –∑–Ω–∞—á–µ–Ω–∏–π
        function createRandomTasks() {
            const randomTasks = {};
            
            for (const category in tasks) {
                // –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—É—é –∑–∞–¥–∞—á—É –∏–∑ 20 –≤–æ–∑–º–æ–∂–Ω—ã—Ö
                const randomIndex = Math.floor(Math.random() * tasks[category].length);
                randomTasks[category] = { ...tasks[category][randomIndex] };
                
                // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –ø—Ä–µ–¥–º–µ—Ç—ã
                randomTasks[category].items = shuffleArray([...randomTasks[category].items]);
            }
            
            return randomTasks;
        }
        
        // –¢–µ–∫—É—â–∏–µ –∑–∞–¥–∞—á–∏
        let currentTasks = {};
        
        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        function startGame() {
            console.log('–ò–≥—Ä–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è...');
            
            // –°–∫—Ä—ã—Ç—å —Å—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω
            document.getElementById('startScreen').style.display = 'none';
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –∏–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω
            document.getElementById('gameScreen').style.display = 'block';
            
            // –°–æ–∑–¥–∞—Ç—å —Å–ª—É—á–∞–π–Ω—ã–µ –∑–∞–¥–∞—á–∏
            currentTasks = createRandomTasks();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–≥—Ä—É
            initGame();
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function initGame() {
            console.log('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã...');
            
            // –°–±—Ä–æ—Å–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            selectedItems = [];
            score = 0;
            seconds = 0;
            
            // –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø–µ—Ä–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é
            loadCategory();
            
            // –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–∞–π–º–µ—Ä
            startTimer();
            
            // –û–±–Ω–æ–≤–∏—Ç—å —Å—á–µ—Ç
            updateScore();
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        function loadCategory() {
            const task = currentTasks[currentCategory];
            
            if (!task) {
                console.error('–ó–∞–¥–∞—á–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:', currentCategory);
                return;
            }
            
            // –û–±–Ω–æ–≤–∏—Ç—å —Ü–µ–ª—å
            document.getElementById('targetValue').textContent = task.target;
            
            // –û—á–∏—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
            const container = document.getElementById('itemsContainer');
            container.innerHTML = '';
            
            // –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏
            task.items.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = 'item';
                card.textContent = item.text;
                card.onclick = function() {
                    toggleSelection(index, card);
                };
                container.appendChild(card);
            });
            
            // –°–±—Ä–æ—Å–∏—Ç—å —Å—É–º–º—É
            document.getElementById('currentSum').textContent = '0';
        }
        
        // –í—ã–±–æ—Ä –∫–∞—Ä—Ç–æ—á–∫–∏
        function toggleSelection(index, card) {
            if (selectedItems.includes(index)) {
                // –£–±—Ä–∞—Ç—å –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö
                selectedItems = selectedItems.filter(i => i !== index);
                card.classList.remove('selected');
            } else {
                // –î–æ–±–∞–≤–∏—Ç—å –≤ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ
                selectedItems.push(index);
                card.classList.add('selected');
            }
            
            updateSum();
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É–º–º—ã
        function updateSum() {
            const task = currentTasks[currentCategory];
            if (!task) return;
            
            let sum = 0;
            
            selectedItems.forEach(index => {
                sum += task.items[index].value;
            });
            
            // –î–ª—è –≤—Ä–µ–º–µ–Ω–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤ –º–∏–Ω—É—Ç–∞—Ö
            if (currentCategory === 'time') {
                document.getElementById('currentSum').textContent = Math.floor(sum / 60);
            } else {
                document.getElementById('currentSum').textContent = sum;
            }
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–∞
        function checkAnswer() {
            const task = currentTasks[currentCategory];
            if (!task) return;
            
            let sum = 0;
            
            selectedItems.forEach(index => {
                sum += task.items[index].value;
            });
            
            // –î–æ–ø—É—Å–∫–∞–µ–º –Ω–µ–±–æ–ª—å—à—É—é –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å
            const tolerance = currentCategory === 'time' ? 60 : 10; // 1 –º–∏–Ω—É—Ç–∞ –¥–ª—è –≤—Ä–µ–º–µ–Ω–∏, 10 –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω–æ–≥–æ
            
            if (Math.abs(sum - task.targetValue) <= tolerance) {
                // –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
                score += 10;
                showMessage('–ú–æ–ª–æ–¥–µ—Ü!', `–¢—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–æ–±—Ä–∞–ª ${task.target}!`, '+10 –±–∞–ª–ª–æ–≤', 'success');
                
                // –ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —á–µ—Ä–µ–∑ 1.5 —Å–µ–∫—É–Ω–¥—ã
                setTimeout(nextCategory, 1500);
            } else {
                // –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
                score = Math.max(0, score - 2);
                if (sum < task.targetValue) {
                    showMessage('–ü–æ–ø—Ä–æ–±—É–π –µ—â–µ!', '–°—É–º–º–∞ –º–µ–Ω—å—à–µ –Ω—É–∂–Ω–æ–π. –î–æ–±–∞–≤—å –µ—â–µ –≤–µ–ª–∏—á–∏–Ω—ã.', '-2 –±–∞–ª–ª–∞', 'error');
                } else {
                    showMessage('–ü–æ–ø—Ä–æ–±—É–π –µ—â–µ!', '–°—É–º–º–∞ –±–æ–ª—å—à–µ –Ω—É–∂–Ω–æ–π. –£–±–µ—Ä–∏ –ª–∏—à–Ω–∏–µ –≤–µ–ª–∏—á–∏–Ω—ã.', '-2 –±–∞–ª–ª–∞', 'error');
                }
            }
            
            updateScore();
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
        function showMessage(title, text, scoreText, type) {
            document.getElementById('messageTitle').textContent = title;
            document.getElementById('messageText').textContent = text;
            document.getElementById('messageScore').textContent = scoreText;
            document.getElementById('messageOverlay').classList.add('show');
            document.getElementById('messageContent').className = 'message-content ' + type;
        }
        
        // –ó–∞–∫—Ä—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
        function closeMessage() {
            document.getElementById('messageOverlay').classList.remove('show');
        }
        
        // –ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        function nextCategory() {
            const categories = ['length', 'mass', 'area', 'time'];
            const currentIndex = categories.indexOf(currentCategory);
            
            if (currentIndex < categories.length - 1) {
                // –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é
                const nextCategory = categories[currentIndex + 1];
                currentCategory = nextCategory;
                
                // –û–±–Ω–æ–≤–∏—Ç—å –∫–Ω–æ–ø–∫–∏
                document.querySelectorAll('.category-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.querySelector(`[onclick="switchCategory('${nextCategory}')"]`).classList.add('active');
                
                // –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é
                selectedItems = [];
                loadCategory();
                closeMessage();
            } else {
                // –í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø—Ä–æ–π–¥–µ–Ω—ã
                showMessage('üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! üéâ', 
                    `–¢—ã –ø—Ä–æ—à–µ–ª –≤—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏!\n\n–û—á–∫–∏: ${score}\n–í—Ä–µ–º—è: ${document.getElementById('timer').textContent}`, 
                    '–û—Ç–ª–∏—á–Ω–∞—è –∏–≥—Ä–∞!', 'success');
            }
        }
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        function switchCategory(category) {
            currentCategory = category;
            selectedItems = [];
            
            // –û–±–Ω–æ–≤–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é
            loadCategory();
        }
        
        // –û—á–∏—Å—Ç–∏—Ç—å –≤—ã–±–æ—Ä
        function clearSelection() {
            selectedItems = [];
            document.querySelectorAll('.item').forEach(card => {
                card.classList.remove('selected');
            });
            document.getElementById('currentSum').textContent = '0';
        }
        
        // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        function restartGame() {
            // –°–±—Ä–æ—Å–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            score = 0;
            seconds = 0;
            selectedItems = [];
            currentCategory = 'length';
            
            // –°–±—Ä–æ—Å–∏—Ç—å —Ç–∞–π–º–µ—Ä
            clearInterval(timer);
            document.getElementById('timer').textContent = '00:00';
            
            // –°–±—Ä–æ—Å–∏—Ç—å –∫–Ω–æ–ø–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
            document.querySelectorAll('.category-btn').forEach((btn, index) => {
                btn.classList.remove('active');
                if (index === 0) btn.classList.add('active');
            });
            
            // –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–µ —Å–ª—É—á–∞–π–Ω—ã–µ –∑–∞–¥–∞—á–∏
            currentTasks = createRandomTasks();
            
            // –°–∫—Ä—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
            closeMessage();
            
            // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–≥—Ä—É
            loadCategory();
            updateScore();
            startTimer();
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç–∞
        function updateScore() {
            document.getElementById('score').textContent = score;
        }
        
        // –ó–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–∞
        function startTimer() {
            clearInterval(timer); // –û—á–∏—Å—Ç–∏—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ç–∞–π–º–µ—Ä
            timer = setInterval(function() {
                seconds++;
                const minutes = Math.floor(seconds / 60);
                const secs = seconds % 60;
                document.getElementById('timer').textContent = 
                    (minutes < 10 ? '0' : '') + minutes + ':' + 
                    (secs < 10 ? '0' : '') + secs;
            }, 1000);
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = function() {
            console.log('–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
            
            // –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤–∏–¥–µ–Ω —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω
            document.getElementById('startScreen').style.display = 'block';
            document.getElementById('gameScreen').style.display = 'none';
            document.getElementById('messageOverlay').classList.remove('show');
            
            // –°–æ–∑–¥–∞—Ç—å –Ω–∞—á–∞–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏
            currentTasks = createRandomTasks();
        };
    </script>
</body>
</html>
